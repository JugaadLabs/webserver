<div class="row">
    <div class="col-sm-6">
        <div class="card mb-4">
            <div class="card-header">Controls</div>
            <div class="card-body">
              <div class="row">
                <div class="col text-center">
                <!-- <div class="btn-group " role="group"> -->
                  <button id="captureButton" class="btn btn-success mr-2" onclick="captureImage()">Capture Image</button>
                  <button id="calibrateButton" class="btn btn-primary" onclick="calibrate()">Calibrate Intrinsics</button>
                </div>
              </div>
              <div class="row mt-4" id="savelocation">
              </div>
            </div>
        </div>
    </div>
    <div class="col-sm-6">
      <div class="card">
        <div class="card-header">Camera View</div>
        <center>
        <img class="card-img-top mt-2 mb-2" style="width: 18rem;" src="/stream">
        </center>
      </div>
  </div>
  </div>
</div>

<script type = " text/javascript">
function captureImage() {
  var xhr = new XMLHttpRequest();
  xhr.open("GET", "/captureImage", true);
  xhr.send();
  xhr.onload = function (e) {
    if (xhr.readyState === 4) {
      if (xhr.status === 200) {
        console.log(xhr.responseText)
        var response = JSON.parse(xhr.responseText)
        savelocation.textContent = "Image saved to: " + response.filename
      } else {
        console.error(xhr.statusText);
      }
    }
  };
}
function calibrate() {
  var xhr = new XMLHttpRequest();
  xhr.open("GET", "/intrinsicCalibration", true);
  xhr.send();
  xhr.onload = function (e) {
    if (xhr.readyState === 4) {
      if (xhr.status === 200) {
        console.log(xhr.responseText)
        savelocation.textContent = xhr.responseText
      } else {
        console.error(xhr.statusText);
      }
    }
  };
}
</script>